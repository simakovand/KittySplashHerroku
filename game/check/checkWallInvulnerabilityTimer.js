/* eslint-disable no-param-reassign */
function checkWallInvulnerabilityTimer(gameStateArg) {
  const currGameState = gameStateArg;
  const invulnerabilityTimer = 30;

  currGameState.walls.forEach((el) => {
    if (el.wallTimer === 1 && el.hp === 1) {
      el.wallTimer = 30;
    }
    if (el.invulnerability.timer === 0) {
      el.invulnerability.timer = invulnerabilityTimer;
      el.invulnerability.active = false;
    }
    if (el.invulnerability.active) {
      el.invulnerability.timer -= 1;
    }
  });

  return currGameState;
}

module.exports = { checkWallInvulnerabilityTimer };
